<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" type="text/css" href="reset.css"/>
    <title>Create Subtitles</title>
</head>
<body>
        <div id="divmain">
            <h1 class="c1">CRIAR SUA LEGENDA</h1>
            <p id="welc">Seja bem-vindo ao Create Subtitles. Para criar sua legenda, você deve informar o texto que deve ser adicionado a legenda, o tempo onde ele inicia e o tempo em que ele é finalizado. Lembre-se de sempre informar 2 digitos no tempo, tanto no minuto, segundo ou nos centésimos. Caso não sejam informados 2 digitos aquela legenda acarretará problemas. Clique em adicionar para adicionar o texto na legenda. Após a conclusão, clique em baixar para seu arquivo de legenda.SRT seja baixado.</p>
            <form id="form">

                <p>Digite a legenda a ser adicionado aqui</p><br>
                <textarea name="" id="sub" cols="30" rows="4" placeholder="Digite a legenda aqui"></textarea>
                <br>
                <p class="a">Digite o Tempo em que a Legenda deve ser Adicionada</p><br>
                                  <input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="min" placeholder="Minuto" size="6">
                <label> <strong>:</strong> </label><input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="sec" placeholder="Segundo" size="6">
                <label> <strong>,</strong> </label><input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="cen" placeholder="Centésimos" size="6">
                <br>
                <p class="a">Digite o Tempo em que a Legenda deve ser Finalizada</p><br>
                                  <input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="minend" placeholder="Minuto" size="6">
                <label> <strong>:</strong> </label><input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="secend" placeholder="Segundo" size="6">
                <label> <strong>,</strong> </label><input type="text" onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="2" id="cenend" placeholder="Centésimos" size="6">
                <br>
                <br>
                <br>
                <label> </label> <button onclick="AddToSRT()" type="submit"> Adicionar </button>

            </form>
            <br>
            <h3 class="c1"> Sua Legenda .SRT</h3>
            <br>
            <p id="SRT"></p>
            <input type="text" id="namesrt" placeholder="Nome Da Legenda" size="14">
            <button onclick="CTF()">Baixar</button>
        </div>
</body>
<script src="FileSaver.js"></script>
<script language="Javascript">
    
    var Num = 0;
    var Tex = "";
    console.log(legenda);

    function CTF(){ 

                var nome = document.getElementById("namesrt").value;


                var blob = new Blob([Tex],
                    {
                    type: "text/plain;charset=utf-8"
                    }
                );

                saveAs(blob, nome + ".srt");

                
            
             }
    function AddToSRT(){
            
        var sub = document.getElementById('sub').value;
        var min = document.getElementById("min").value;
        var sec = document.getElementById("sec").value;
        var cen = document.getElementById("cen").value;
        var min_end = document.getElementById("minend").value;
        var sec_end = document.getElementById("secend").value;
        var cen_end = document.getElementById("cenend").value;
        var newTxt = "00:" + min + ":" + sec + "," + cen + "0" +" --> " + "00:" + min_end + ":" + sec_end + "," + cen_end + "0";
        Num++;
        document.getElementById("SRT").innerHTML += Num + '<br>' + newTxt + '<br>' + sub + '<br>' + '<br>';

        Tex += Num + '\r\n' + newTxt + '\r\n' + sub + '\r\n' + '\r\n';

        event.preventDefault();

    }
</script>
</html>